---
import Card from '../components/Card.astro';
import CardList from '../components/CardList.astro';
import ContactPrompt from '../components/ContactPrompt.astro';
import Hero from '../components/Hero.astro';
import Skills from '../components/Skills.astro';
import Layout from '../layouts/Layout.astro';
import type { ProjectProps } from './projects/[slug].astro';

const projects = await Astro.glob<ProjectProps>('/src/projects/*.md');
---

<Layout title="DaniloArantesF">
  <main>
    <Hero
      heading="Hello There"
      text="this is my website. I like programming stuff. gibe me money plz"
    />
    <Skills />
    <CardList name="Projects and Experiments" viewAll="/projects">
      {
        projects
          .filter((p) => p.frontmatter.featured)
          .map((project) => {
            const slug = project.file.substring(
              project.file.lastIndexOf('/') + 1,
              project.file.length - 3,
            );
            return (
              <Card
                href={`/projects/${slug}`}
                {...project.frontmatter}
                description={''}
              />
            );
          })
      }
    </CardList>
    <ContactPrompt text="give job pls" />
  </main>
</Layout>

<style is:global>
  main {
    display: flex;
    flex-direction: column;
    gap: 5rem;
    width: 100%;
    max-width: min(100%, var(--content-max-width));
    margin: 0 auto;
    overflow-x: hidden;
  }

  main > section {
    margin: 0 var(--main-margin-x);
  }
</style>
