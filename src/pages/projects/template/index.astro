---
import StealthLayout from '../../../layouts/StealthLayout.astro';
---

<StealthLayout title="Template">
  <main>
    <canvas id="app_view"></canvas>
    <div id="gui_container"></div>
  </main>
</StealthLayout>

<script>
  import * as THREE from 'three';
  import BaseScene from '../../../lib/sceneController';
  import basicVertexShader from './shaders/vertex.vs.glsl?raw';
  import basicFragmentShader from './shaders/fragment.fs.glsl?raw';

  const canvas = document.getElementById('app_view')! as HTMLCanvasElement;
  const { scene, renderer, camera, uniforms } = BaseScene({ canvas });

  /* ---------- Geometry ---------- */
  const geometry = new THREE.SphereGeometry(0.5, 10, 10);
  const material = new THREE.ShaderMaterial({
    uniforms: {
      ...uniforms,
      uTest: { value: 1 },
    },
    vertexShader: basicVertexShader,
    fragmentShader: basicFragmentShader,
  });

  const mesh = new THREE.Mesh(geometry, material);
  scene.add(mesh);
</script>

<style is:global>
  html {
    height: 100vh;
    overflow: hidden;
  }
</style>

<style>
  body {
    width: 100%;
    height: 100vh;
    background: var(--color-background);
    overflow: hidden;
    overscroll-behavior: none;
    margin: 0;
    padding: 0;
  }

  #app_view {
    display: block;
    width: 100%;
    height: 100%;
  }

  #gui_container {
    position: absolute;
    bottom: 2rem;
    left: 50%;
    transform: translateX(-50%);
  }

  #gui {
    position: absolute;
    top: 0;
    left: 0;
  }
</style>
